<link rel="import" href="../vendors/polymer/polymer-element.html">
<link rel="import" href="../vendors/polymer/lib/elements/dom-repeat.html">
<link rel="import" href="../vendors/polymer/lib/elements/dom-if.html">
<link rel="import" href="vegan-styles-common.html">

<dom-module id="vegan-search-results">
  <template>    
    <link type="text/css" rel="stylesheet" href="https://use.fontawesome.com/ac44d0f306.css" />
    <style include="vegan-styles-common"></style>   
    <style>
      section {
        background-color: #fafafa;
        padding: 30px;
        position: relative;
      }

      .icon {
        position: absolute;
        right: 30px;
        top: 25px;
      }

      .icon i.fa {
        color: #1BAF0F;
      }

      article {
        margin-top: 30px;
      }

      h3.message {
        margin: 0;
      }

      p {
        max-height: 5em;
        overflow: hidden;
        display: -webkit-box;
        -webkit-line-clamp: 4;
        -webkit-box-orient: vertical;
        margin-bottom: 0;
      }
    </style>

    <template is="dom-if" if="{{searchResults.message}}">
      <section>
          <a href="javascript:void(0)" class="icon" on-click="clearSearch">
            <i class="fa fa-times-circle fa-2x" aria-hidden="true"></i>
          </a>
          <h3 class="message">{{searchResults.message}}</h3>

        <template is="dom-repeat" items="{{searchResults.articles}}">
          <article>
            <h3><a href="/[[item.path]]">[[item.title]]</a></h3>
            <p>[[item.contents]]</p>
          </article>
        </template>
      </section>    
    </template>    
  </template>
  <script>
    class VeganSearchResults extends Polymer.Element {
      static get is() { return  'vegan-search-results' }

      static get properties() {
        return {
          searchQuery: {
            type: String,
            notify: true
          }, 
          searchResults: {
            type: Object,
            notify: true
          }
        }
      }

      clearSearch(e) {
        this.set('searchQuery', '');
        this.set('searchResults.message', '');
        this.set('searchResults.articles', []);
      }
    }
    customElements.define(VeganSearchResults.is, VeganSearchResults);    
  </script>
</dom-module>